###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.50.1.4415/W32 for ARM      25/Nov/2013  16:03:03 #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\src\init_ports.c                              #
#    Command line =  E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\src\init_ports.c -D USE_STDPERIPH_DRIVER -D   #
#                    STM32F2XX -D USE_STM322xG_EVAL -lcN                      #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\STM322xG_EVAL\List\ -o                  #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\STM322xG_EVAL\Obj\ --no_cse             #
#                    --no_unroll --no_inline --no_code_motion --no_tbaa       #
#                    --no_clustering --no_scheduling --debug --endian=little  #
#                    --cpu=Cortex-M3 -e --fpu=None --dlib_config "C:\Program  #
#                    Files (x86)\IAR Systems\Embedded Workbench               #
#                    6.5\arm\INC\c\DLib_Config_Full.h" -I                     #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\inc\ -I                              #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Libraries\CMSIS\CM3\DeviceS #
#                    upport\ST\STM32F2xx\ -I E:\work\ihome\stm\ihome_stm_02\P #
#                    roject\FreeRTOS\httpserver_netconn\EWARM\..\..\..\..\Lib #
#                    raries\STM32F2xx_StdPeriph_Driver\inc\ -I                #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Libraries\STM32F2x7_ETH_Dri #
#                    ver\inc\ -I E:\work\ihome\stm\ihome_stm_02\Project\FreeR #
#                    TOS\httpserver_netconn\EWARM\..\..\..\..\Utilities\STM32 #
#                    _EVAL\Common\ -I E:\work\ihome\stm\ihome_stm_02\Project\ #
#                    FreeRTOS\httpserver_netconn\EWARM\..\..\..\..\Utilities\ #
#                    STM32_EVAL\STM322xG_EVAL\ -I                             #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Utilities\Third_Party\lwip_ #
#                    v1.3.2\src\include\ -I E:\work\ihome\stm\ihome_stm_02\Pr #
#                    oject\FreeRTOS\httpserver_netconn\EWARM\..\..\..\..\Util #
#                    ities\Third_Party\lwip_v1.3.2\src\include\lwip\ -I       #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Utilities\Third_Party\lwip_ #
#                    v1.3.2\src\include\netif\ -I                             #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Utilities\Third_Party\lwip_ #
#                    v1.3.2\src\include\ipv4\ -I                              #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Utilities\Third_Party\lwip_ #
#                    v1.3.2\port\STM32F2x7\ -I E:\work\ihome\stm\ihome_stm_02 #
#                    \Project\FreeRTOS\httpserver_netconn\EWARM\..\..\..\..\U #
#                    tilities\Third_Party\lwip_v1.3.2\port\STM32F2x7\FreeRTOS #
#                    \ -I E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\htt #
#                    pserver_netconn\EWARM\..\..\..\..\Utilities\Third_Party\ #
#                    FreeRTOS_v7.4.2\portable\IAR\ARM_CM3\ -I                 #
#                    E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\..\..\..\..\Utilities\Third_Party\FreeR #
#                    TOS_v7.4.2\include\ -On --use_c++_inline -I "C:\Program  #
#                    Files (x86)\IAR Systems\Embedded Workbench               #
#                    6.5\arm\CMSIS\Include\"                                  #
#    List file    =  E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\STM322xG_EVAL\List\init_ports.lst       #
#    Object file  =  E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserv #
#                    er_netconn\EWARM\STM322xG_EVAL\Obj\init_ports.o          #
#                                                                             #
#                                                                             #
###############################################################################

E:\work\ihome\stm\ihome_stm_02\Project\FreeRTOS\httpserver_netconn\src\init_ports.c
      1          #include "init_ports.h"
      2          
      3          //*****************************************************************************
      4          /**
      5          * @brief External params
      6          */
      7          extern const uint32_t GPIOM_CLK[PORTn];
      8          extern const uint16_t GPIOM_PIN[PORTn];
      9          extern GPIO_TypeDef* GPIOM_PORT[PORTn];
     10          extern const uint16_t PORT_EXTI_LINE[PORTn];
     11          extern const uint8_t PORT_EXTI_PORT_SOURCE[PORTn];
     12          extern const uint8_t PORT_EXTI_PIN_SOURCE[PORTn];
     13          extern const uint8_t PORT_EXTI_IRQn[PORTn];
     14          
     15          /** Инициализация пина как выход
     16          * @brief Init Port how PORTOut
     17          * @param Port - номер порта для конфигурации
     18          * @return - void
     19          */
     20          void init_ports_PORTOut(Ports_TypeDef Port) // Out port
     21          {
     22            GPIO_InitTypeDef  GPIO_InitStructure;
     23            
     24            /* Enable the GPIO_LED Clock */
     25            RCC_AHB1PeriphClockCmd(GPIOM_CLK[Port], ENABLE);
     26          
     27          
     28            /* Configure the GPIO_LED pin */
     29            //Configure output-----
     30            GPIO_InitStructure.GPIO_Pin = GPIOM_PIN[Port];
     31            GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
     32            GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;  
     33            GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
     34            GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
     35            GPIO_Init(GPIOM_PORT[Port], &GPIO_InitStructure);
     36          }
     37          //-------------------------------------------------------------------
     38          /** Инициализация пина как вход Port
     39          * @brief Init Port how PORTIn
     40          * @param Port - - номер порта для конфигурации
     41          * @return - void
     42          */
     43          void init_ports_PORTIn(Ports_TypeDef Port)  // in port
     44          {
     45            GPIO_InitTypeDef  GPIO_InitStructure;
     46            
     47            /* Enable the GPIO_LED Clock */
     48            RCC_AHB1PeriphClockCmd(GPIOM_CLK[Port], ENABLE);
     49          
     50          
     51                /* Configure Button pin as input */
     52                GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
     53                GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
     54                GPIO_InitStructure.GPIO_Pin = GPIOM_PIN[Port];
     55                GPIO_Init(GPIOM_PORT[Port], &GPIO_InitStructure);
     56                
     57          }
     58          //--------------------------------------------------------------------
     59          /** Инициализация пина как ШИМ 
     60          * @brief Init Port how PWM
     61          * @param - Port номер порта для конфигурации
     62          * @return - void
     63          */
     64          void init_ports_PORTPwm (Ports_TypeDef Port)  //PWM port
     65          {
     66            
     67          }
     68          //--------------------------------------------------------------------
     69          /** Инициализация пина как АЦП
     70          * @brief Init Port how ADC
     71          * @param - Port номер порта для конфигурации
     72          * @return - void
     73          */
     74          void init_ports_PORTAdc (Ports_TypeDef Port)  // ADC port
     75          {
     76            
     77          }
     78          
     79          //*****************************************************************************
     80          // arguments
     81          //  EXTI_Trigger_Rising
     82          //  EXTI_Trigger_Falling
     83          //  EXTI_Trigger_Rising_Falling
     84          //  EXTITrigger_TypeDef;
     85          //----- Init Interrupt -----------------------------
     86          /**
     87          * @brief Init Port Interrupt
     88          * @param - Port номер порта для конфигурации, Port_Mode - (PORT_MODE_GPIO\PORT_MODE_EXTI), tr - (EXTI_Trigger_Rising \ EXTI_Trigger_Falling \ EXTI_Trigger_Rising_Falling)
     89          * @return - void
     90          */
     91          void init_ports_Interrupt(Ports_TypeDef Port, PortIO_TypeDef Port_Mode, EXTITrigger_TypeDef tr) // interrupt port
     92          {
     93            GPIO_InitTypeDef GPIO_InitStructure;
     94            EXTI_InitTypeDef EXTI_InitStructure;
     95            NVIC_InitTypeDef NVIC_InitStructure;
     96            
     97          //  /* Enable the PORT Clock */
     98            RCC_AHB1PeriphClockCmd(GPIOM_CLK[Port], ENABLE);
     99            RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);
    100          
    101            /* Configure Button pin as input */
    102            GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
    103            GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
    104            GPIO_InitStructure.GPIO_Pin = GPIOM_PIN[Port];
    105            GPIO_Init(GPIOM_PORT[Port], &GPIO_InitStructure);
    106          
    107          
    108              /* Connect Button EXTI Line to Button GPIO Pin */
    109              SYSCFG_EXTILineConfig(PORT_EXTI_PORT_SOURCE[Port], PORT_EXTI_PIN_SOURCE[Port]);
    110          
    111              /* Configure Button EXTI line */
    112              EXTI_InitStructure.EXTI_Line = PORT_EXTI_LINE[Port];
    113              EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;
    114              EXTI_InitStructure.EXTI_Trigger = tr;  // po narast frontu
    115              EXTI_InitStructure.EXTI_LineCmd = ENABLE;
    116              EXTI_Init(&EXTI_InitStructure);
    117          
    118              /* Enable and set Button EXTI Interrupt to the lowest priority */
    119              NVIC_InitStructure.NVIC_IRQChannel = PORT_EXTI_IRQn[Port];
    120              NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0x05;  //lowest proirity
    121              NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0x05;
    122              NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
    123          
    124              NVIC_Init(&NVIC_InitStructure); 
    125          }
    126          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      40   init_ports_Interrupt
        40   -> EXTI_Init
        40   -> GPIO_Init
        40   -> NVIC_Init
        40   -> RCC_AHB1PeriphClockCmd
        40   -> RCC_APB2PeriphClockCmd
        40   -> SYSCFG_EXTILineConfig
       0   init_ports_PORTAdc
      16   init_ports_PORTIn
        16   -> GPIO_Init
        16   -> RCC_AHB1PeriphClockCmd
      16   init_ports_PORTOut
        16   -> GPIO_Init
        16   -> RCC_AHB1PeriphClockCmd
       0   init_ports_PORTPwm


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_2
       4  ??DataTable2_3
       4  ??DataTable2_4
       4  ??DataTable2_5
       4  ??DataTable2_6
     156  init_ports_Interrupt
       2  init_ports_PORTAdc
      56  init_ports_PORTIn
      68  init_ports_PORTOut
       2  init_ports_PORTPwm

 
 312 bytes in section .text
 
 312 bytes of CODE memory

Errors: none
Warnings: none
